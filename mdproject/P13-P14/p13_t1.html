<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Mahasiswa</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
</head>
<body style="font-family: Poppins; background-color: #DED6C9;">
    <div class="container">
        <div class="card shadow-lg mt-5 p-4 rounded-3" style="background-color: #F7F2ED;">
            <h4 class="text-center text-uppercase fw-bold">Data Mahasiswa</h4>
            <div class="d-flex mb-3">
                <a href="form.html" class="btn btn-success btn-sm me-auto">Tambah</a>
                <input class="form-control form-control-sm" id="searchInput" type="text" placeholder="Cari.." style="width: 300px;">
            </div>
            <table id="mahasiswa-table" class="table table-striped border shadow-lg" style="font-size: 15px;">
                <thead>
                    <tr>
                        <th>NIM</th>
                        <th>Nama</th>
                        <th>Jenis Kelamin</th>
                        <th>Program Studi</th>
                        <th>Alamat</th>
                        <th>Telepon</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="table-data">
                    <!-- Data Mahasiswa akan ditampilkan di sini -->
                </tbody>
            </table>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadTableData();
            function loadTableData() {
                fetch('https://sheet.best/api/sheets/b01159c7-5d70-47b6-89f2-d96b9dba50ee')
                    .then(response => response.json())
                    .then(data => {
                        console.log('Sukses memuat data!', data);
                        
                        // Mengambil tabel dari HTML
                        const tableBody = document.querySelector("#mahasiswa-table tbody");
                        tableBody.innerHTML = ''; // Clear existing table data
                        
                        // Iterasi melalui data dan tambahkan baris ke tabel
                        data.forEach(mahasiswa => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${mahasiswa.NIM}</td>
                                <td>${mahasiswa.Nama}</td>
                                <td>${mahasiswa["Jenis Kelamin"]}</td>
                                <td>${mahasiswa.Prodi}</td>
                                <td>${mahasiswa.Alamat}</td>
                                <td>${mahasiswa.Telepon}</td>
                                <td>
                                    <button class="btn btn-sm btn-danger">Hapus</button>
                                    <button class="btn btn-sm btn-warning text-light">Edit</button>
                                </td>
                            `;
                            tableBody.appendChild(row);
                        });
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        // Tampilkan pesan kesalahan jika terjadi masalah dalam mengambil data
                        const tableBody = document.querySelector("#mahasiswa-table tbody");
                        const row = document.createElement("tr");
                        row.innerHTML = '<td colspan="7" class="text-center">Gagal memuat data! Silakan coba lagi nanti.</td>';
                        tableBody.appendChild(row);
                    });
            }
        });
    </script>
    <script>
        $(document).ready(function(){
            $("#searchInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#table-data tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });
        });
    </script>
</body>
</html>
